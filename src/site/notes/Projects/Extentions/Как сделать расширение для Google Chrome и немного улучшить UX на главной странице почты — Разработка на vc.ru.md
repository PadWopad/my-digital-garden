---
{"dg-publish":true,"created":"2025-01-13T16:41:17 (UTC +03:00)","tags":[],"source":"https://vc.ru/dev/159897-kak-sdelat-rasshirenie-dlya-google-chrome-i-nemnogo-uluchshit-ux-na-glavnoi-stranice-pochty","author":"Sergey Kulakov","permalink":"/projects/extentions/kak-sdelat-rasshirenie-dlya-google-chrome-i-nemnogo-uluchshit-ux-na-glavnoj-stranicze-pochty-razrabotka-na-vc-ru/","dgPassFrontmatter":true}
---


# Как сделать расширение для Google Chrome и немного улучшить UX на главной странице почты — Разработка на vc.ru

> ## Excerpt
> В этой инструкции я покажу, как создать расширение для браузера Google Chrome и при желании опубликовать его в открытом доступе.

---
В этой инструкции я покажу, как создать расширение для браузера Google Chrome и при желании опубликовать его в открытом доступе.

Расширение или плагин для Chrome – это приложение, которое добавляет новые возможности браузеру. [В магазине Chrome](https://api.vc.ru/v2.8/redirect?to=https%3A%2F%2Fchrome.google.com%2Fwebstore%2Fcategory%2Fextensions%3Fhl%3Dru%26&postId=159897) порядка 200 тысяч расширений для разработчиков, маркетологов, дизайнеров и других пользователей браузера.

Больше года назад я заметил, что ссылки «Входящие» и «Написать письмо» на главной странице почты, которой я часто пользуюсь, стали открываться в новом окне. [По ответу эксперта](https://api.vc.ru/v2.8/redirect?to=https%3A%2F%2Fotvet.mail.ru%2Fanswer%2F1934867808&postId=159897) стало понятно, что придется привыкать к этому спорному нововведению.

Я привыкнуть не смог: каждый раз возвращаться и закрывать вкладку браузера неудобно. Так появилась идея простого расширения для Chrome, которое вернет прежнее поведение при открытии Входящих и написании нового письма.

> SimilarWeb [показывает](https://www.similarweb.com/website/mail.ru/) 1,141 млрд посещений главной страницы за август. Если хотя бы 10% из них приходится на десктопный браузер и целевое действие, то это 141 млн открытых вкладок в месяц. На возврат и закрытие вкладки уходит не меньше секунды. Получается, мы собираемся сэкономить 31,5 тысячи человеко-часов в месяц.

Приготовим минимальный стартовый набор.

1\. Создайте папку проекта. Назовите ее именем вашего расширения.

2\. Создайте javascript-файл, в котором будет реализована логика приложения. Я назвал его **app.js**.

3\. Добавьте в созданный файл команду для тестирования: вывод строки в консоль или в диалоговое окно браузера.

alert('Hello from my extension!');

4\. Создайте **manifest.json** – служебный файл, который должен быть в каждом расширении.

{ "manifest\_version": 2, "name": "Mail link healer", "version": "1.0", "description": "Ссылка «Входящие» и «Написать письмо» снова открываются в той же вкладке!", "icons": { "128": "128.png" }, "content\_scripts": \[ { "matches": \[ "<all\_urls>" \], "js": \[ "app.js" \] } \] }

Обязательные параметры, должны быть в каждом **manifest.json**:

-   **manifest\_version** – целое число, обозначает версию формата манифеста. Для современных версий браузера значение равно 2;
    
-   **name** – название расширения, до 45 символов. К названию стоит подойти ответственно – оно отображается в магазине, при установке и на странице управления расширениями (chrome://extensions);
    
    **version** – строка с версией расширения. Содержит до четырех чисел, разделенных точками, например 2.19.7.0.  
    

Необязательные параметры:

-   **description** – простой текст, до 132 символов. Отображается в магазине и на странице управления расширениями;
    
-   **icons** – список из иконок расширения;
    
-   **content\_scripts** – скрипты, которые загружает приложение. Мы прописали запуск **app.js** на всех веб-страницах. Позже мы изменим этот параметр, чтобы запускать скрипт только на целевой странице. Строго говоря, в нашем случае **content\_scripts** – обязательный параметр. Если его не задать, расширение не сделает ничего полезного.

5\. Подготовьте иконку в формате **png** размером 128х128 пикселей и положите ее в папку проекта. Эта версия отображается при установке и в магазине расширений. Рекомендуют также добавить иконку размером 48х48 пикселей – она отображается на странице управления расширениями. И можно добавить версию 16х16 пикселей, которая будет использоваться как фавикон.

К этому моменту в нашем проекте есть иконка расширения, **manifest.json** со служебной информацией и **app.js**, в котором позже появится код приложения.

. ├── 128.png ├── app.js ├── manifest.json

**Примечание:** расширение может состоять из нескольких JS-файлов, HTML-верстки и CSS-стилей.

Теперь можно проверить, что мы выполнили минимальные требования к расширению.

1\. Войдите в свой аккаунт в браузере Chrome.

2\. Перейдете на страницу **chrome://extensions**.

3\. В правом верхнем углу включите **Режим разработчика**.

4\. Нажмите **Загрузить распакованное расширение** и выберите папку проекта. В результате вы увидите похожую картинку:

5\. В новой вкладке браузера откройте любую веб-страницу. Отлично, работает!

Теперь мы готовы добавить полезное действие.

Проверим код ссылок «Входящие» и «Написать письмо» на странице почты с помощью инструментов разработчика браузера. Нажимаем правую кнопку на ссылке и выбираем **Посмотреть код**. Видно, что ссылки открываются в новой вкладке из-за атрибута **target=”\_blank”**.

Получается, с помощью javascript нам нужно выбрать две ссылки и удалить этот атрибут.

1\. В **app.js** сохраните ссылки в переменные:

const inboxLink = document.getElementById('mailbox:unreadEmails:link'); const composeLink = document.getElementById('mailbox:write\_letter');

Здесь мы выбираем элементы по их идентификатору (**id**).

2\. Если такие ссылки найдены, удалите у них атрибут **target**.

if (inboxLink && composeLink) { // если ссылки есть на странице // удаляем у них атрибут 'target' inboxLink.removeAttribute('target'); composeLink.removeAttribute('target'); }

Похоже, этого кода достаточно для решения проблемы.

Заодно давайте пропишем в **manifest.json** правило, по которому расширение будет запускать наш скрипт только на целевой странице. Для этого в параметре **content\_scripts** в ключе **matches** пропишем конкретный URL:

"content\_scripts": \[ { "matches": \[ "https://mail.ru/\*" \], "js": \[ "app.js" \] } \]

Звездочку в конце URL я поставил, чтобы скрипт срабатывал на всех страницах, начинающихся с _https://mail.ru/_.

Кстати, после обновления расширения стоит обновить версию и в **manifest.json**:

"version": "1.1",

После внесения правок важно обновить расширение в браузере. Для этого нажмите на стрелку на странице управления расширениями (chrome://extensions/).

Готово! Проверим расширение в боевых условиях.

Открываем целевую страницу и переходим по ссылкам «Входящие» и «Написать письмо». Победа! Ссылки открываются в той же вкладке, как в старые добрые времена.

Этот шаг необязательный. Во-первых, возможно, вы не хотите делать доступным для всех свое расширение. А во-вторых, возможно, не захотите платить за это $5. Такой регистрационный сбор должен оплатить разработчик Chrome Web Store.

1.  Создайте zip-архив с файлами проекта.
2.  Зарегистрируйтесь как разработчик Chrome Web Store. Для этого войдите [в консоль разработчика](https://api.vc.ru/v2.8/redirect?to=https%3A%2F%2Fchrome.google.com%2Fwebstore%2Fdevconsole%2Fregister&postId=159897) под своим аккаунтом Chrome, примите условия соглашения и Политику конфиденциальности.
3.  Оплатите регистрационный сбор $5. Оплатить можно картой, как в обычных интернет-магазинах.
4.  На дашборде разработчика в разделе Аккаунт добавьте адрес электронной почты. Без этого не получится отправить расширение на проверку.
5.  В личном кабинет разработчика нажмите **Добавить продукт** и загрузите zip-архив проекта.
6.  В разделе **Описание продукта** заполните описание расширения, выберите категорию и язык. Добавьте хотя бы один скриншот расширения.
7.  В разделе **Конфиденциальность** коротко опишите единственное назначение расширения, обоснование для использования разрешения и отметьте, что не используете разрешение «удаленный код».
8.  В разделе **Цель и распространение** задайте, кому будет доступно расширение.
9.  Нажмите **Отправить на проверку** в правом верхнем углу.  
    

Это всё. Остается ждать результат проверки, которая может занять несколько недель.

Я отправил расширение на проверку параллельно с публикацией статьи. Как только получу ответ, добавлю комментарий со ссылкой на опубликованное расширение.

Надеюсь, эта инструкция была вам полезной. Буду рад обсудить детали в комментариях.

![](https://leonardo.osnova.io/5c63be49-162a-5e4e-adca-9b9c3f76314c/)

4

[](https://vc.ru/u/617692-evgeniya-evseeva)[](https://vc.ru/services)

![](https://leonardo.osnova.io/68b439fe-7f92-5582-a786-425e80ba1cca/)

«ВКонтакте» и «Авито» попали в список контрафакции и пиратства торгпредставительства США за 2024 год[](https://vc.ru/editorial)

«Вконтакте» — за неудаление «пиратского» видео, «Авито» — за контрафакт на площадке.

[

Странно, что до рутуб не внесли, но, возможно, просто не смогли разобраться с интерфейсом

](https://vc.ru/services/1751598-vkontakte-i-avito-popali-v-spisok-kontrafakcii-i-piratstva-torgpredstavitelstva-ssha-za-2024-god#comments)

[](https://vc.ru/u/597714-polina-laakso)[](https://vc.ru/invest)

![](https://leonardo.osnova.io/72fac99b-4a25-5b06-be24-5fc600d98417/)

«Эта идея абсурдна»: ЦБ прокомментировал возможную заморозку вкладов в России[](https://vc.ru/editorial)

Регулятор назвал такой сценарий «вредным мифом».

[](https://vc.ru/u/1133170-slava-ryumin)[](https://vc.ru/life)

![](https://leonardo.osnova.io/f44aed10-406b-58d4-b029-0b08335d80e3/)

Исповедь перекупа: я слежу за оборачиваемостью, продаю на 50 млн в месяц на маркетплейсах, но заработаю только если

Когда мне вручали диплом инженера-программиста, попросили не ходить в центр занятости, чтобы не портить статистику. Но через полчаса я уже написал свой первый бизнес-план, и мне безвозмездно, то есть даром, выдали 58 800 ₽ на развитие бизнеса.

День 1055: ВТБ получил 5 млрд рублей со счетов бывшей британской «дочки» в России, «ВКонтакте» и «Авито» попали в «пиратский» список США[](https://vc.ru/editorial)

Собираем новости, события и мнения о рынках, банках и реакциях компаний.

![](https://leonardo.osnova.io/5c63be49-162a-5e4e-adca-9b9c3f76314c/)

12

![](https://leonardo.osnova.io/b9e9a5d6-cfbc-5d11-9b31-edad6bb6fbf0/)

4

[](https://vc.ru/u/274857-dmitrii-sheverev)[](https://vc.ru/tribuna)

![](https://leonardo.osnova.io/84d936fe-0ce2-52af-9ca0-370f6ff96f9f/)

GPT боты в массовом рекрутинге: будущее HR автоматизации

В этой статье я расскажу, почему традиционные чат-боты для рекрутинга — уже вчерашний день, и как генеративные нейросети помогают не потерять потенциальных звезд в первые же минуты знакомства.

[](https://vc.ru/u/4188980-malcev-o-karere-i-marketinge)[](https://vc.ru/ai)

![](https://leonardo.osnova.io/bf967bbd-dadc-543d-aa7a-ff2596b7eb13/)

Как я с помощью GPT читаю и запоминаю посты из сотни Telegram каналов и не схожу с ума

-   В Телеграме море полезной информации, но как найти время, чтобы читать и запоминать ее?
-   Как заставить нейросети помогать с чтением не только книг, но и тысяч постов с полезным контентом?
-   Расскажу, как использую GPT, чтобы читать и учиться быстрее, чем когда-либо. Покажу примеры работы со своей базой знаний из постов Telegram-каналов, книг и курсов.

[](https://vc.ru/u/1070781-kotfinans)

![](https://leonardo.osnova.io/8c5e5696-c8b4-53fd-ad11-de2d305a7ce8/)

⭐️ВТБ под давлением. Опять 😞

Рейтинговое агентство АКРА выпустило интересный материал по банковскому сектору. Разбираемся, что к чему, и причем тут ВТБ?

![](https://leonardo.osnova.io/5c63be49-162a-5e4e-adca-9b9c3f76314c/)

15

[](https://vc.ru/u/igotosochi)

![](https://leonardo.osnova.io/b800c613-3a9b-57bc-ab9f-25c338d7c042/)

Где дивиденды, Алроса? История, доходность, дивидендная политика и перспективы Алросы

Не всё то золото, что блестит. Алмазы, например, тоже блестят, как и глаза инвесторов, когда они ждут дивиденды. Смотрим, что по дивидендам у крупнейшего алмазадобытчика России и мира.

![](https://leonardo.osnova.io/5c63be49-162a-5e4e-adca-9b9c3f76314c/)

18
